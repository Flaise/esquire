{"version":3,"sources":["../../src/scene/pie-avatar.js"],"names":[],"mappings":"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","file":"src/scene/pie-avatar.js","sourcesContent":["'use strict'\n\nvar DefaultAvatar = require('./default-avatar')\nvar sanity = require('./sanity')\nvar esquire = require('./index')\nvar turns = require('./turns')\n\n\nfunction PieAvatar(avatars) {\n    DefaultAvatar.call(this, avatars)\n    sanity.constants(this, {\n        /*\n         * Distance of second jaw from first jaw. Positive is clockwise.\n         */\n        breadth: avatars.interpolands.make(0),\n        \n        /*\n         * Distance of first jaw from north. Positive is clockwise.\n         */\n        startAngle: avatars.interpolands.make(0),\n        \n        innerRadiusRel: avatars.interpolands.make(0)\n    })\n    this.fillStyle = undefined\n    this.strokeStyle = undefined\n    this.lineWidth = undefined\n}\nPieAvatar.prototype = Object.create(DefaultAvatar.prototype)\nmodule.exports = exports = PieAvatar\n\nPieAvatar.prototype.remove = function() {\n    if(this.removed)\n        return\n    this.breadth.remove()\n    this.startAngle.remove()\n    this.innerRadiusRel.remove()\n    DefaultAvatar.prototype.remove.call(this)\n}\n\nPieAvatar.prototype.draw = function(context) {\n    if(this.breadth.curr === 0)\n        return\n    \n    context.save()\n    if(this.x.curr || this.y.curr)\n        context.translate(this.x.curr, this.y.curr)\n    if(this.angle.curr)\n        context.rotate(turns.wrap(this.angle.curr))\n    if(this.w.curr !== 1 || this.h.curr !== 1)\n        context.scale(this.w.curr, this.h.curr)\n    \n    context.beginPath()\n    \n    if(this.breadth.curr >= 1) {\n        context.arc(0, 0, .5, 0, Math.PI * 2, false)\n    }\n    else {\n        var startAngle = this.startAngle.curr\n        var endAngle = startAngle + this.breadth.curr\n        \n        startAngle = turns.toRadians(startAngle - .25)\n        endAngle = turns.toRadians(endAngle - .25)\n        \n        context.arc(0, 0, .5 * this.innerRadiusRel.curr, endAngle, startAngle,\n                    this.breadth.curr >= 0)\n        context.arc(0, 0, .5, startAngle, endAngle, this.breadth.curr < 0)\n    }\n    \n    context.closePath()\n    \n    context.globalAlpha = esquire.clamp(this.opacity.curr, 0, 1)\n    \n    if(this.fillStyle) {\n        context.fillStyle = this.fillStyle\n        context.fill()\n    }\n    if(this.strokeStyle) {\n        context.strokeStyle = this.strokeStyle\n        context.lineWidth = this.lineWidth\n        context.stroke()\n    }\n    \n    context.restore()\n}\n"]}