{"version":3,"sources":["../../src/scene/camera.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;+BAA4B,qBAAqB;;;;qBAC/B,SAAS;;;;IAEN,MAAM;cAAN,MAAM;;AACZ,aADM,MAAM,CACX,OAAO,EAAE;8BADJ,MAAM;;AAEnB,mCAFa,MAAM,6CAEb,OAAO,EAAC;AACd,YAAI,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AACrC,YAAI,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AACrC,YAAI,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AACrC,YAAI,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AACrC,YAAI,CAAC,OAAO,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AAC3C,YAAI,CAAC,OAAO,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AAC3C,YAAI,CAAC,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AACzC,YAAI,CAAC,YAAY,GAAG,kCAAqB,CAAA;KAC5C;;iBAXgB,MAAM;;eAajB,kBAAG;AACL,gBAAG,IAAI,CAAC,OAAO,EACX,OAAM;AACV,gBAAI,CAAC,CAAC,CAAC,MAAM,EAAE,CAAA;AACf,gBAAI,CAAC,CAAC,CAAC,MAAM,EAAE,CAAA;AACf,gBAAI,CAAC,CAAC,CAAC,MAAM,EAAE,CAAA;AACf,gBAAI,CAAC,CAAC,CAAC,MAAM,EAAE,CAAA;AACf,gBAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAA;AACrB,gBAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAA;AACrB,gBAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAA;AACnB,uCAvBa,MAAM,wCAuBL;SACjB;;;eAEG,gBAAG;AACH,gBAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAA;;AAExB,gBAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAA;;AAE7B,mBAAO,CAAC,IAAI,EAAE,CAAA;AACd,mBAAO,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAA;;AAEtE,gBAAM,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAA;AACzD,gBAAM,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAA;AACzD,gBAAI,EAAE,IAAI,EAAE,EACR,OAAO,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;;AAE7B,uCAvCa,MAAM,sCAuCR,OAAO,EAAC;;AAEnB,mBAAO,CAAC,OAAO,EAAE,CAAA;SACpB;;;WA1CgB,MAAM;;;qBAAN,MAAM","file":"src/scene/camera.js","sourcesContent":["import EventDispatcher from '../event-dispatcher'\nimport Group from './group'\n\nexport default class Camera extends Group {\n    constructor(avatars) {\n        super(avatars)\n        this.x = avatars.interpolands.make(0)\n        this.y = avatars.interpolands.make(0)\n        this.w = avatars.interpolands.make(0)\n        this.h = avatars.interpolands.make(0)\n        this.anchorX = avatars.interpolands.make(0)\n        this.anchorY = avatars.interpolands.make(0)\n        this.angle = avatars.interpolands.make(0)\n        this.onBeforeDraw = new EventDispatcher()\n    }\n    \n    remove() {\n        if(this.removed)\n            return\n        this.x.remove()\n        this.y.remove()\n        this.w.remove()\n        this.h.remove()\n        this.anchorX.remove()\n        this.anchorY.remove()\n        this.angle.remove()\n        super.remove()\n    }\n    \n    draw() {\n        this.onBeforeDraw.proc()\n\n        const canvas = context.canvas\n\n        context.save()\n        context.scale(canvas.width / this.w.curr, canvas.height / this.h.curr)\n\n        const dx = -this.x.curr + this.w.curr * this.anchorX.curr\n        const dy = -this.y.curr + this.h.curr * this.anchorY.curr\n        if (dx || dy)\n            context.translate(dx, dy)\n\n        super.draw(context)\n\n        context.restore()\n    }\n}\n"]}