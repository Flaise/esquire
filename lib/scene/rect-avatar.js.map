{"version":3,"sources":["../../src/scene/rect-avatar.js"],"names":[],"mappings":"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","file":"src/scene/rect-avatar.js","sourcesContent":["'use strict'\n\nvar DefaultAvatar = require('./default-avatar')\nvar sanity = require('./sanity')\n\n\nfunction RectAvatar(avatars) {\n    DefaultAvatar.call(this, avatars)\n    sanity.constants(this, {\n        anchorX: avatars.interpolands.make(0),\n        anchorY: avatars.interpolands.make(0)\n    })\n    this.fillStyle = undefined\n    this.strokeStyle = undefined\n    this.lineWidth = undefined\n    this.radius = undefined\n}\nRectAvatar.prototype = Object.create(DefaultAvatar.prototype)\nmodule.exports = exports = RectAvatar\n\nRectAvatar.prototype.remove = function() {\n    if(this.removed)\n        return\n    this.anchorX.remove()\n    this.anchorY.remove()\n    DefaultAvatar.prototype.remove.call(this)\n}\n\nRectAvatar.prototype.draw = function(context) {\n    context.save()\n    this.doTransform(context)\n    if(this.anchorX.curr || this.anchorY.curr)\n        context.translate(-this.w.curr * this.anchorX.curr, -this.h.curr * this.anchorY.curr)\n\n    if(this.radius)\n        doRoundRectPath(context, 0, 0, this.w.curr, this.h.curr, this.radius)\n\n    if(this.fillStyle) {\n        context.fillStyle = this.fillStyle\n        if(this.radius)\n            context.fill()\n        else\n            context.fillRect(0, 0, this.w.curr, this.h.curr)\n    }\n    if(this.strokeStyle) {\n        context.strokeStyle = this.strokeStyle\n        context.lineWidth = this.lineWidth\n        if(this.radius)\n            context.stroke()\n        else\n            context.strokeRect(0, 0, this.w.curr, this.h.curr)\n    }\n\n    context.restore()\n}\n\nfunction doRoundRectPath(context, x, y, w, h, radius) {\n    context.beginPath()\n    context.moveTo(x + radius, y)\n    context.lineTo(x + w - radius, y)\n    context.quadraticCurveTo(x + w, y, x + w, y + radius)\n    context.lineTo(x + w, y + h - radius)\n    context.quadraticCurveTo(x + w, y + h, x + w - radius, y + h)\n    context.lineTo(x + radius, y + h)\n    context.quadraticCurveTo(x, y + h, x, y + h - radius)\n    context.lineTo(x, y + radius)\n    context.quadraticCurveTo(x, y, x + radius, y)\n    context.closePath()\n}\n"]}