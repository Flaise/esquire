{"version":3,"sources":["../../src/scene/rect-avatar.js"],"names":[],"mappings":"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","file":"src/scene/rect-avatar.js","sourcesContent":["import DefaultAvatar from './default-avatar'\n\nexport default class RectAvatar extends DefaultAvatar {\n    constructor(avatars) {\n        super(avatars)\n        this.anchorX = avatars.interpolands.make(0)\n        this.anchorY = avatars.interpolands.make(0)\n        this.fillStyle = undefined\n        this.strokeStyle = undefined\n        this.lineWidth = undefined\n        this.radius = undefined\n    }\n    \n    draw(context) {\n        context.save()\n        this.doTransform(context)\n        if(this.anchorX.curr || this.anchorY.curr)\n            context.translate(-this.w.curr * this.anchorX.curr, -this.h.curr * this.anchorY.curr)\n\n        if(this.radius)\n            doRoundRectPath(context, 0, 0, this.w.curr, this.h.curr, this.radius)\n\n        if(this.fillStyle) {\n            context.fillStyle = this.fillStyle\n            if(this.radius)\n                context.fill()\n            else\n                context.fillRect(0, 0, this.w.curr, this.h.curr)\n        }\n        if(this.strokeStyle) {\n            context.strokeStyle = this.strokeStyle\n            context.lineWidth = this.lineWidth\n            if(this.radius)\n                context.stroke()\n            else\n                context.strokeRect(0, 0, this.w.curr, this.h.curr)\n        }\n\n        context.restore()\n    }\n    \n    remove() {\n        if(this.removed)\n            return\n        this.anchorX.remove()\n        this.anchorY.remove()\n        super.remove()\n    }\n}\n\nfunction doRoundRectPath(context, x, y, w, h, radius) {\n    context.beginPath()\n    context.moveTo(x + radius, y)\n    context.lineTo(x + w - radius, y)\n    context.quadraticCurveTo(x + w, y, x + w, y + radius)\n    context.lineTo(x + w, y + h - radius)\n    context.quadraticCurveTo(x + w, y + h, x + w - radius, y + h)\n    context.lineTo(x + radius, y + h)\n    context.quadraticCurveTo(x, y + h, x, y + h - radius)\n    context.lineTo(x, y + radius)\n    context.quadraticCurveTo(x, y, x + radius, y)\n    context.closePath()\n}\n"]}