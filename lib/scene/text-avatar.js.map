{"version":3,"sources":["../../src/scene/text-avatar.js"],"names":[],"mappings":"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","file":"src/scene/text-avatar.js","sourcesContent":["'use strict'\n\nvar Avatar = require('./avatar')\nvar sanity = require('./sanity')\nvar esquire = require('./index')\nimport is from '../is'\n\n\nfunction TextAvatar(avatars, camera) {\n    Avatar.call(this, avatars)\n    sanity(camera)\n    sanity.constants(this, {\n        _interpolands: avatars.interpolands,\n        x: avatars.interpolands.make(0),\n        y: avatars.interpolands.make(0),\n        opacity: avatars.interpolands.make(1),\n        camera: camera\n    })\n    this.font = undefined\n    this.text = ''\n    this.textAlign = 'center' // center, left, right\n    this.textBaseline = 'middle' // middle, top, bottom\n    this.fillStyle = undefined // 'black'\n    this.strokeStyle = undefined\n    this.lineWidth = undefined\n}\nTextAvatar.prototype = Object.create(Avatar.prototype)\nmodule.exports = exports = TextAvatar\n\nTextAvatar.prototype.draw = function(context) {\n    var canvas = context.canvas\n    var cw = canvas.width\n    var ch = canvas.height\n    \n    context.save()\n    context.globalAlpha = esquire.clamp(this.opacity.curr, 0, 1)\n    \n    if(is.function(this.font))\n        context.font = this.font(cw, ch)\n    else\n        context.font = this.font\n    \n    if(this.x.curr || this.y.curr)\n        context.translate(this.x.curr, this.y.curr)\n    context.scale(1 / (cw / this.camera.w.curr),\n                  1 / (ch / this.camera.h.curr))\n    \n    context.textAlign = this.textAlign\n    context.textBaseline = this.textBaseline\n    \n    if(this.strokeStyle) {\n        if(is.function(this.lineWidth))\n            context.lineWidth = this.lineWidth(cw, ch)\n        else\n            context.lineWidth = this.lineWidth\n        context.strokeStyle = this.strokeStyle\n        context.strokeText(this.text, 0, 0)\n    }\n    if(this.fillStyle) {\n        context.fillStyle = this.fillStyle\n        context.fillText(this.text, 0, 0)\n    }\n    \n    context.restore()\n}\n\nTextAvatar.prototype.remove = function() {\n    if(this.removed)\n        return\n    this.x.remove()\n    this.y.remove()\n    this.opacity.remove()\n    this._avatar_remove()\n}\n"]}