{"version":3,"sources":["../../src/scene/text-avatar.js"],"names":[],"mappings":"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","file":"src/scene/text-avatar.js","sourcesContent":["import Avatar from './avatar'\nimport is from '../is'\n\nexport default class TextAvatar extends Avatar {\n    constructor(avatars, camera) {\n        super(avatars)\n        this._interpolands = avatars.interpolands\n        this.x = avatars.interpolands.make(0)\n        this.y = avatars.interpolands.make(0)\n        this.opacity = avatars.interpolands.make(1)\n        this.camera = camera\n        this.font = undefined\n        this.text = ''\n        this.textAlign = 'center' // options: center, left, right\n        this.textBaseline = 'middle' // options: middle, top, bottom\n        this.fillStyle = undefined // example: 'black'\n        this.strokeStyle = undefined\n        this.lineWidth = undefined\n    }\n    \n    draw(context) {\n        const canvas = context.canvas\n        const cw = canvas.width\n        const ch = canvas.height\n        \n        context.save()\n        context.globalAlpha = esquire.clamp(this.opacity.curr, 0, 1)\n        \n        if(is.function(this.font))\n            context.font = this.font(cw, ch)\n        else\n            context.font = this.font\n        \n        if(this.x.curr || this.y.curr)\n            context.translate(this.x.curr, this.y.curr)\n        context.scale(1 / (cw / this.camera.w.curr),\n                      1 / (ch / this.camera.h.curr))\n        \n        context.textAlign = this.textAlign\n        context.textBaseline = this.textBaseline\n        \n        if(this.strokeStyle) {\n            if(is.function(this.lineWidth))\n                context.lineWidth = this.lineWidth(cw, ch)\n            else\n                context.lineWidth = this.lineWidth\n            context.strokeStyle = this.strokeStyle\n            context.strokeText(this.text, 0, 0)\n        }\n        if(this.fillStyle) {\n            context.fillStyle = this.fillStyle\n            context.fillText(this.text, 0, 0)\n        }\n        \n        context.restore()\n    }\n    \n    remove() {\n        if(this.removed)\n            return\n        this.x.remove()\n        this.y.remove()\n        this.opacity.remove()\n        super.remove()\n    }\n}\n"]}