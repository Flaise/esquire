{"version":3,"sources":["../../src/scene/default-avatar.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;sBAAmB,UAAU;;;;qBACL,UAAU;;uBACd,YAAY;;IAGX,aAAa;cAAb,aAAa;;AACnB,aADM,aAAa,CAClB,OAAO,EAAE;8BADJ,aAAa;;AAE1B,mCAFa,aAAa,6CAEpB,OAAO,EAAC;AACd,YAAI,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AACrC,YAAI,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AACrC,YAAI,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AACrC,YAAI,CAAC,CAAC,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AACrC,YAAI,CAAC,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;;;AAGzC,YAAI,CAAC,OAAO,GAAG,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AAC3C,YAAI,CAAC,SAAS,GAAG,SAAS,CAAA;KAC7B;;iBAZgB,aAAa;;eAcnB,qBAAC,OAAO,EAAE;AACjB,gBAAG,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,EACzB,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAA;AAC/C,gBAAG,IAAI,CAAC,KAAK,CAAC,IAAI,EACd,OAAO,CAAC,MAAM,CAAC,sBAAU,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAA;;AAE9C,gBAAG,CAAC,IAAI,CAAC,SAAS;AACd,uBAAO,CAAC,WAAW,GAAG,oBAAM,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;SAC3D;;;eAEK,kBAAG;AACL,gBAAG,IAAI,CAAC,OAAO,EACX,OAAM;AACV,gBAAI,CAAC,CAAC,CAAC,MAAM,EAAE,CAAA;AACf,gBAAI,CAAC,CAAC,CAAC,MAAM,EAAE,CAAA;AACf,gBAAI,CAAC,CAAC,CAAC,MAAM,EAAE,CAAA;AACf,gBAAI,CAAC,CAAC,CAAC,MAAM,EAAE,CAAA;AACf,gBAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAA;AACnB,gBAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAA;AACrB,uCAjCa,aAAa,wCAiCZ;SACjB;;;WAlCgB,aAAa;;;qBAAb,aAAa","file":"src/scene/default-avatar.js","sourcesContent":["import Avatar from './avatar'\nimport {toRadians} from '../turns'\nimport {clamp} from '../scalars'\n\n\nexport default class DefaultAvatar extends Avatar {\n    constructor(avatars) {\n        super(avatars)\n        this.x = avatars.interpolands.make(0)\n        this.y = avatars.interpolands.make(0)\n        this.w = avatars.interpolands.make(0)\n        this.h = avatars.interpolands.make(0)\n        this.angle = avatars.interpolands.make(0)\n        \n        // TODO: use Opacity node\n        this.opacity = avatars.interpolands.make(1)\n        this.skipAlpha = undefined\n    }\n    \n    doTransform(context) {\n        if(this.x.curr || this.y.curr)\n            context.translate(this.x.curr, this.y.curr)\n        if(this.angle.curr)\n            context.rotate(toRadians(this.angle.curr))\n        // can't scale here; it breaks radii and strokes\n        if(!this.skipAlpha) ////////// TODO: always use Opacity group\n            context.globalAlpha = clamp(this.opacity.curr, 0, 1)\n    }\n    \n    remove() {\n        if(this.removed)\n            return\n        this.x.remove()\n        this.y.remove()\n        this.w.remove()\n        this.h.remove()\n        this.angle.remove()\n        this.opacity.remove()\n        super.remove()\n    }\n}\n"]}