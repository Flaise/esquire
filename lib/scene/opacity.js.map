{"version":3,"sources":["../../src/scene/opacity.js"],"names":[],"mappings":"AAAA,YAAY,CAAA;;AAEZ,IAAI,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAA;AAChC,IAAI,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC,CAAA;;AAG9B,SAAS,OAAO,CAAC,OAAO,EAAE,KAAK,EAAE;AAC7B,SAAK,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAA;AACzB,UAAM,CAAC,SAAS,CAAC,IAAI,EAAE;AACnB,aAAK,EAAE,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC;KAC1C,CAAC,CAAA;CACL;AACD,OAAO,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAA;AAClD,MAAM,CAAC,OAAO,GAAG,OAAO,GAAG,OAAO,CAAA;;AAElC,OAAO,CAAC,SAAS,CAAC,MAAM,GAAG,YAAW;AAClC,QAAG,IAAI,CAAC,OAAO,EACX,OAAM;AACV,QAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAA;AACnB,SAAK,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;CACpC,CAAA;;AAED,OAAO,CAAC,SAAS,CAAC,IAAI,GAAG,UAAS,OAAO,EAAE;AACvC,QAAG,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EACnC,OAAM;;AAEV,QAAI,IAAI,GAAG,OAAO,CAAC,WAAW,CAAA;AAC9B,QAAG,IAAI,KAAK,IAAI,CAAC,KAAK,CAAC,IAAI,EACvB,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAA;;AAEzC,SAAK,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAA;;AAExC,QAAG,IAAI,KAAK,IAAI,CAAC,KAAK,CAAC,IAAI,EACvB,OAAO,CAAC,WAAW,GAAG,IAAI,CAAA;CACjC,CAAA","file":"src/scene/opacity.js","sourcesContent":["'use strict'\n\nvar sanity = require('./sanity')\nvar Group = require('./group')\n\n\nfunction Opacity(avatars, alpha) {\n    Group.call(this, avatars)\n    sanity.constants(this, {\n        alpha: avatars.interpolands.make(alpha)\n    })\n}\nOpacity.prototype = Object.create(Group.prototype)\nmodule.exports = exports = Opacity\n\nOpacity.prototype.remove = function() {\n    if(this.removed)\n        return\n    this.alpha.remove()\n    Group.prototype.remove.call(this)\n}\n\nOpacity.prototype.draw = function(context) {\n    if(!this.alive.size || !this.alpha.curr)\n        return\n    \n    var prev = context.globalAlpha\n    if(prev !== this.alpha.curr)\n        context.globalAlpha = this.alpha.curr\n    \n    Group.prototype.draw.call(this, context)\n    \n    if(prev !== this.alpha.curr)\n        context.globalAlpha = prev\n}\n"]}