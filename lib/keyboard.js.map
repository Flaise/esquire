{"version":3,"sources":["../src/keyboard.js"],"names":[],"mappings":"AAAA,YAAY,CAAA;;AAEZ,IAAI,QAAQ,GAAG,OAAO,CAAC,YAAY,CAAC,CAAA;;AAGpC,SAAS,UAAU,CAAC,KAAK,EAAE;AACvB,WAAO,KAAK,IAAI,KAAK,KAAK,IAAI,CAAA;CACjC;;;;AAID,SAAS,QAAQ,CAAC,OAAO,EAAE;AACvB,QAAI,CAAC,MAAM,GAAG,EAAE,CAAA;;AAEhB,WAAO,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,UAAS,CAAC,EAAE;AAC7C,YAAI,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAA;AACtC,YAAG,IAAI,KAAK,UAAU,IAAI,IAAI,KAAK,MAAM,IAAI,IAAI,KAAK,UAAU,IAAI,IAAI,KAAK,QAAQ,EACjF,OAAM;;;AAGV,YAAG,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,EACjC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,KAAK,GAAG,IAAI,CAAA,KAEnC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI,CAAA;KACpC,CAAA,CAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;AACd,WAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,UAAS,CAAC,EAAE;AAC3C,YAAG,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,EACjC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,KAAK,GAAG,KAAK,CAAA,KAEpC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,KAAK,CAAA;KACrC,CAAA,CAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;CACjB;AACD,MAAM,CAAC,OAAO,GAAG,OAAO,GAAG,QAAQ,CAAA;;AAEnC,QAAQ,CAAC,SAAS,CAAC,WAAW,GAAG,UAAS,OAAO,EAAE;AAC/C,QAAG,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,EAC/B,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,CAAA,KAEjC,OAAO,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;CACpC,CAAA;AACD,QAAQ,CAAC,SAAS,CAAC,MAAM,GAAG,UAAS,OAAO,EAAE;AAC1C,QAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;AAChC,QAAG,UAAU,CAAC,KAAK,CAAC,EAChB,OAAO,KAAK,CAAA;AAChB,SAAK,GAAG,IAAI,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAA;AAC7B,QAAI,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,KAAK,CAAA;AAC5B,WAAO,KAAK,CAAA;CACf,CAAA","file":"src/keyboard.js","sourcesContent":["'use strict'\n\nvar Reactant = require('./reactant')\n\n\nfunction isReactant(stuff) {\n    return stuff && stuff !== true\n}\n\n// depressed = true\n// unpressed = false\nfunction Keyboard(element) {\n    this.states = {}\n    \n    element.addEventListener('keydown', (function(e) {\n        var type = document.activeElement.type\n        if(type === 'textarea' || type === 'text' || type === 'password' || type === 'number')\n            return // TODO: this doesn't account for holding the button while switching focus\n\n        // entry is one of: [ undefined, true, false, {Reactant} ]\n        if(isReactant(this.states[e.keyCode]))\n            this.states[e.keyCode].value = true\n        else\n            this.states[e.keyCode] = true\n    }).bind(this))\n    element.addEventListener('keyup', (function(e) {\n        if(isReactant(this.states[e.keyCode]))\n            this.states[e.keyCode].value = false\n        else\n            this.states[e.keyCode] = false\n    }).bind(this))\n}\nmodule.exports = exports = Keyboard\n\nKeyboard.prototype.getKeyState = function(keyCode) {\n    if(isReactant(this.states[keyCode]))\n        return this.states[keyCode].value\n    else\n        return !!this.states[keyCode]\n}\nKeyboard.prototype.getKey = function(keyCode) {\n    var state = this.states[keyCode]\n    if(isReactant(state))\n        return state\n    state = new Reactant(!!state)\n    this.states[keyCode] = state\n    return state\n}\n\n"]}