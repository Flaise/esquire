{"version":3,"sources":["../src/interpolands.js"],"names":[],"mappings":"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","file":"src/interpolands.js","sourcesContent":["'use strict'\n\nvar ObjectPool = require('./object-pool')\nvar sanity = require('./sanity')\nvar is = require('./is')\nvar tween = require('./tween')\n\n\nfunction Interpoland(tweens, value) {\n    value = value || 0\n    this.curr = value\n    this.base = value\n    this.dest = value\n    this.tweens = tweens\n    this.removed = false\n}\nInterpoland.prototype.mod = function(delta, duration, tweenFunc, onDone, remainder) {\n    this.dest += delta\n    return this.tweens.make(this, delta, delta, duration, tweenFunc, onDone, remainder)\n}\nInterpoland.prototype.modTo = function(dest, duration, tweenFunc, onDone, remainder) {\n    return this.mod(dest - this.dest, duration, tweenFunc, onDone, remainder)\n}\nInterpoland.prototype.modNow = function(delta) {\n    this.base += delta\n    this.curr += delta\n    this.dest += delta\n}\nInterpoland.prototype.modToNow = function(dest) {\n    this.modNow(dest - this.dest)\n}\nInterpoland.prototype.setTo = function(dest) {\n    this.base = dest\n    this.curr = dest\n    this.dest = dest\n    this.tweens.removeInterpolands([this]) // TODO\n}\nInterpoland.prototype.setToInitial = function(dest) {\n    this.base = dest\n    this.curr = dest\n    this.dest = dest\n}\nInterpoland.prototype.mod_noDelta = function(amplitude, duration, tweenFunc, onDone, remainder) {\n    return this.tweens.make(this, 0, amplitude, duration, tweenFunc, onDone, remainder)\n}\nInterpoland.prototype.remove = function() {\n    this.removed = true\n}\nsanity.noAccess(Interpoland.prototype, 'value')\n\n\n\nfunction Interpolands() {\n    ObjectPool.call(this, Interpoland)\n    this.tweens = new Tweens()\n}\nInterpolands.prototype = Object.create(ObjectPool.prototype)\n\nInterpolands.prototype.setTo = function(interpolands, dest) {\n    for(var i = 0; i < interpolands.length; i += 1) {\n        var interpoland = interpolands[i]\n        interpoland.base = dest\n        interpoland.curr = dest\n        interpoland.dest = dest\n    }\n    this.tweens.removeInterpolands(interpolands)\n}\nInterpolands.prototype.setToMany = function(interpolands, dests) {\n    for(var i = 0; i < interpolands.length; i += 1) {\n        var interpoland = interpolands[i]\n        var dest = dests[i]\n        interpoland.base = dest\n        interpoland.curr = dest\n        interpoland.dest = dest\n    }\n    this.tweens.removeInterpolands(interpolands)\n}\n\n\nInterpolands.prototype.make = function(value) {\n    return ObjectPool.prototype.make.call(this, this.tweens, value)\n}\nInterpolands.prototype.remove = undefined\n\nInterpolands.prototype.update = function(dt) {\n    var shiftBy = 0\n    for(var i = 0; i < this.aliveCount; i += 1) {\n        var interpoland = this.alive[i]\n        \n        if(interpoland.removed) {\n            this.dead[this.deadCount] = interpoland\n            this.deadCount += 1\n            shiftBy += 1\n        }\n        else {\n            if(shiftBy && i - shiftBy >= 0)\n                this.alive[i - shiftBy] = interpoland\n            interpoland.curr = interpoland.base\n        }\n    }\n    this.aliveCount -= shiftBy\n    this.tweens.update(dt)\n}\n\nInterpolands.prototype.clear = function() {\n    ObjectPool.prototype.clear.call(this)\n    this.tweens.clear()\n}\n\nmodule.exports = exports = Interpolands\n\n\n\nfunction Tween(interpoland, dest, amplitude, duration, func, onDone, remainder) {\n    if(sanity.throws) {\n        sanity(is.object(interpoland))\n        if(sanity(is.number(dest)))\n            dest = 0\n        if(sanity(is.number(amplitude)))\n            amplitude = dest\n        if(sanity(is.number(duration)))\n            duration = 0\n        if(sanity(is.function(func)))\n            func = tween.linear\n        if(sanity(is.nullish.or.function(onDone)))\n            onDone = undefined\n        if(sanity(is.number(remainder)))\n            remainder = 0\n    }\n    \n    this.interpoland = interpoland\n    this.curr = 0\n    this.elapsed = remainder\n    this.dest = dest\n    this.duration = duration\n    this.func = func\n    this.onDone = onDone\n    this.amplitude = amplitude\n}\n\n\n\nfunction Tweens() {\n    ObjectPool.call(this, Tween)\n    this.ending = []\n    this.remainder = 0\n}\nTweens.prototype = Object.create(ObjectPool.prototype)\n\nTweens.prototype.make = function(interpoland, dest, amplitude, duration, func, onDone, remainder) {\n    if(is.nullish(remainder))\n        remainder = this.remainder\n    return ObjectPool.prototype.make.call(this, interpoland, dest, amplitude, duration, func,\n                                          onDone, remainder)\n}\n\nTweens.prototype.removeInterpolands = function(removals, count) {\n    if(count === 0)\n        return\n    count = count || removals.length\n    sanity(count <= removals.length)\n    \n    var shiftBy = 0\n    for(var i = 0; i < this.aliveCount; i += 1) {\n        var tween = this.alive[i]\n        \n        var deleting = false\n        for(var j = 0; j < count; j += 1) {\n            if(removals[j] === tween.interpoland) {\n                deleting = true\n                break\n            }\n        }\n        \n        if(deleting) {\n            this.dead[this.deadCount] = tween\n            this.deadCount += 1\n            shiftBy += 1\n        }\n        else if(shiftBy && i - shiftBy >= 0)\n            this.alive[i - shiftBy] = tween\n    }\n    this.aliveCount -= shiftBy\n}\nTweens.prototype.update = function(dt) {\n    var endingCount = 0\n    var shiftBy = 0\n    for(var i = 0; i < this.aliveCount; i += 1) {\n        var tween = this.alive[i]\n        tween.elapsed += dt\n        \n        if(tween.interpoland.removed) {\n            shiftBy += 1\n            \n            this.dead[this.deadCount] = tween\n            this.deadCount += 1\n        }\n        else if(tween.elapsed >= tween.duration) {\n            shiftBy += 1\n            \n            if(tween.onDone) {\n                this.ending[endingCount] = tween\n                endingCount += 1\n            }\n            else {\n                this.dead[this.deadCount] = tween\n                this.deadCount += 1\n            }\n            \n            tween.interpoland.curr += tween.dest\n            tween.interpoland.base += tween.dest\n        }\n        else {\n            tween.interpoland.curr += tween.amplitude * tween.func(tween.elapsed / tween.duration)\n\n            if(shiftBy && i - shiftBy >= 0)\n                this.alive[i - shiftBy] = tween\n        }\n    }\n    this.aliveCount -= shiftBy\n    for(var i = 0; i < endingCount; i += 1) {\n        var tween = this.ending[i]\n        \n        this.remainder = tween.elapsed - tween.duration\n        tween.onDone(this.remainder)\n        tween.onDone = undefined\n        this.dead[this.deadCount] = tween\n        this.deadCount += 1\n    }\n    this.remainder = 0\n}\n"]}