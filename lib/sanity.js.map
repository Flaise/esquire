{"version":3,"sources":["../src/sanity.js"],"names":[],"mappings":"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","file":"src/sanity.js","sourcesContent":["'use strict'\n\n/*\nUsage:\n\nif(sanity(a)) {\n    ...; // a kludge that will keep the program from crashing\n}\n...; // the code that always executes\n */\nmodule.exports = exports = function(arg) {\n    arg = !arg\n    if(exports.throws) {\n        if(arg)\n            throw new Error()\n    }\n    return arg\n}\n\n/*\n * If true, sanity(false) throws\n * If false, sanity(false) returns true\n */\nexports.throws = false\n\nexports.attribute = function(obj, key, value, validator) {\n    if(exports.throws) {\n        if(!validator)\n            throw new Error()\n        Object.defineProperty(obj, key, {\n            get: function() { return value },\n            set: function(newValue) {\n                if(!validator(newValue))\n                    throw new Error()\n                value = newValue\n            }\n        })\n    }\n    else {\n        obj[key] = value\n    }\n}\nexports.attributes = function(obj, values, validator) {\n    if(exports.throws) {\n        if(typeof values === 'string'\n                || !validator)\n            throw new Error()\n        for(var key in values)\n            exports.attribute(obj, key, values[key], validator)\n    }\n    else {\n        if(typeof values === 'string')\n            exports.attribute.apply(undefined, arguments)\n        else\n            for(var key in values)\n                obj[key] = values[key]\n    }\n}\n\nexports.constants = function(obj, values) {\n    if(exports.throws) {\n        if(typeof values === 'string')\n            throw new Error()\n        for(var key in values)\n            Object.defineProperty(obj, key, {value: values[key], writable: false})\n    }\n    else {\n        if(typeof values === 'string')\n            exports.constant.apply(undefined, arguments)\n        else\n            for(var key in values)\n                obj[key] = values[key]\n    }\n}\nexports.constant = function(obj, key, value) {\n    if(exports.throws)\n        Object.defineProperty(obj, key, {value: value, writable: false})\n    else\n        obj[key] = value\n}\n\nfunction raise() {\n    throw new Error()\n}\n\nexports.noAccess = function(obj, keys) {\n    if(!exports.throws)\n        return\n    if(!keys.forEach)\n        return exports.noAccess(obj, [keys])\n    keys.forEach(function(key) {\n        Object.defineProperty(obj, key, {get: raise, set: raise})\n    })\n}\n\n"]}